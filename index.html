<!doctype html>
<html>

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Sustainable software and data</title>

        <link rel="stylesheet" href="dist/reset.css">
        <link rel="stylesheet" href="dist/reveal.css">
        <link rel="stylesheet" href="dist/theme/black.css">
        <link rel="stylesheet" href="style.css">

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css">
    </head>

    <body>
        <div class="reveal">
            <div class="slides">
                <section data-background-image="figures/osama-elsayed-vqRMXgVtGXM-unsplash.jpg">
                    <div class="box text-shadow">
                        <h2>Sustainable software and data</h2>
                        <h3>open and community driven software development</h3>
                        <p><b>Marius Paul Isken</b></p>
                        <p>GFZ German Research Centre for Geosciences, Potsdam &middot; QuakeSaver GmbH</p>
                        <p>
                            <img data-src=" logos/logo-gfz.svg" class="logo" />
                        </p>
                    </div>
                </section>
                <section>
                    <h2>Introduction</h2>
                    <ol>
                        <li>Sustainable software development</li>
                        <li>Open Data</li>
                        <li>Publishing software and data</li>
                    </ol>
                </section>
                <section>
                    <section>
                        <h2>Why is this important?</h2>
                        <ul>
                            <li class="fragment fade-in-then-semi-out" style="font-style: italic;">Scientific code is as
                                important as the paper</li>
                            <li class="fragment fade-in-then-semi-out">Discuss implementations with peers</li>
                            <li class="fragment fade-in-then-semi-out">Tools can be shared üî•</li>
                        </ul>

                        <aside class="notes">
                            <ul>
                                <li>reproduction and peer review. Double standard.</li>
                                <li style="font-style: bold;">How much time do you spend coding?</li>
                            </ul>

                        </aside>
                    </section>
                    <section>
                        <h2>What is sustainable software?</h2>
                        <ul>
                            <li class="fragment fade-in-then-semi-out">Open access &rarr; <span
                                    style="font-family: monospace;">git</span> / GitHub</li>
                            <li class="fragment fade-in-then-semi-out">Readable</li>
                            <li class="fragment fade-in-then-semi-out">Maintainable</li>
                            <li class="fragment fade-in-then-semi-out">Modular and extensible</li>
                        </ul>
                        <p class="fragment">
                            üêøÔ∏è Open to the community, engagement to collaboration.
                        </p>
                        <aside class="notes">
                            <ul>
                                <li>Code can be re-used by many people.</li>
                                <li>Do one thing and to it right.</li>
                            </ul>
                        </aside>
                    </section>

                    <section data-auto-animate>
                        <h2>Readable code üìö</h2>
                        <ul>
                            <li><b>Reading code</b> takes as much time as writing it</li>
                            <li class="fragment">Code <b>review, collaboration and extensibility</b></li>
                        </ul>
                        <aside class="notes">YOU need to read your code again! How often have you come back and could
                            not read your code?</aside>
                    </section>
                    <section data-auto-animate>
                        <h2>Code is Communication </h2>
                        <pre class="python"><code data-trim data-noescape data-line-numbers>
for i in all_data:
    p.add(i)

l = len(p)

def sel_eq(c, x, r, time):
    ...
</code>
                    </pre>
                        <div class="fragment">
                            <p>Be explicit, be clear.</p>
                            <pre class="python" data-id="example-good"><code data-trim data-noescape data-line-numbers>
for earthquake in catalog:
    selected_earthquakes.add(earthquake)

total_earthquakes = len(selected_earthquakes)


def select_earthquakes(catalog, max_distance, max_depth, sort=False):
    ...
</code>
                    </pre>
                            <p class="fragment">Principle of <b>self-documenting code</b>.<br />Avoid comments where not
                                necessary.</p>
                        </div>
                        <aside class="notes">
                            pre-optimisation is the root of all evil.
                        </aside>
                    </section>

                    <section data-auto-animate>
                        <h2>Code is communication</h2>
                        <pre class="python" data-id="example-good"><code data-trim data-line-numbers>
for earthquake in catalog:
    selected_earthquakes.add(earthquake)

total_earthquakes = len(selected_earthquakes)


def select_earthquakes(catalog, max_distance, max_depth, sort=False):
    """Select earthquakes within a given distance and depth range.

    Args:
    catalog (EarthquakeCatalog): Earthquake catalogue to select from.
    max_distance (float): Maximum spherical distance in meters.
    max_depth (float): Maximum depth in meters.
    sort (bool, optional): Limit number of earthquakes. Defaults to False.
    """
    ...</code></pre>
                        <p>Function documentation. Automatically generate online documentation.</p>
                    </section>

                    <section data-auto-animate>
                        <h2>Code Formatting</h2>
                        <p>Code styles can look different. It shouldn't!</p>
                        <pre class="python"><code data-trim data-line-numbers>
def select_earthquakes(catalog,max_distance,max_depth,sort = False):
    if catalog==None: return

    total_earthquakes=len(catalog)

    selected_earthquakes= set()
    for earthquake in catalog:
        selected_earthquakes.add(
        earthquake
        )

    ...
                        </code></pre>
                    </section>
                    <section data-auto-animate>
                        <h2>Code Formatting</h2>
                        <p>Every code looks different. It shouldn't!</p>
                        <pre class="python"><code data-trim data-line-numbers>
def select_earthquakes(catalog, max_distance, max_depth, sort=False):
    if catalog is None:
        return

    total_earthquakes = len(catalog)

    selected_earthquakes = set()
    for earthquake in catalog:
        selected_earthquakes.add(earthquake)

    ...
                        </code></pre>

                        <p><b>Use autoformatters and linters.</b></p>
                        <div>
                            <ul>
                                <li>Python: black / autopep8 / flake8</li>
                                <li>Matlab: mlint</li>
                            </ul>
                        </div>
                        <aside class="notes">
                            <ul>
                                <li>Your brain is extremely good at pattern matching. Use it!</li>
                                <li>Modern programming languages come with built-in tools, they can only look one
                                    way
                                </li>
                                <li>Automate this in modern IDEs</li>
                                <li>black, autopep8, flake8. Matlab: mlint</li>
                            </ul>
                        </aside>
                    </section>

                    <section>
                        <h2>Leverage modern editors</h2>
                        <p>Modern IDEs automate tasks and provide contextual information.</p>
                        <div class="r-stretch"><img data-src="figures/hello-world.gif" /></div>
                        <ul>
                            <li>Autocompletion</li>
                            <li>Formatting</li>
                            <li>Linting / static code analysis</li>
                        </ul>
                        <p>&rarr; Smooth workflow, fewer bugs</p>
                    </section>

                    <section data-background-color="white">
                        <h2>Programming Patterns</h2>
                        <img data-src="figures/pattern-observer.png" width="30%" />
                        <p>e.g. observer pattern / Credit: <a href="https://refactoring.guru">refactoring.guru</a></p>
                        <p style="font-style: italic;">Design Patterns: Elements of Reusable Object-Oriented
                            Software (1994)
                        </p>
                    </section>
                    <section>
                        <h2>Programming Patterns</h2>
                        <iframe data-src="https://refactoring.guru/design-patterns/catalog" width="90%"
                            class="r-stretch" data-preload></iframe>
                        <p>Credit: <a href="https://refactoring.guru">refactoring.guru</a></p>
                    </section>

                    <section>
                        <h2>Unittests</h2>
                        <p>Write small snippets of code testing your functions.</p>
                        <pre class="python"><code data-trim data-noescape data-line-numbers>
def test_modelling():
    assert my_model == expected_data

    plot(my_model)
                        </code></pre>
                        <p class="fragmetn">Ensures stability and collaboration</p>
                    </section>

                    <section>
                        <h2>Git Workflow</h2>
                        <p>Collaboration with colleagues and peers.</p>
                        <img data-src="figures/git-workflow.jpg" />
                        <p class="fragment">Use code reviews, get out there and stand the critic.</p>
                        <aside class="notes">Sometimes the ego is in our way. Try taking it out.</aside>
                    </section>
                    <section>
                        <h2>Code reviews</h2>
                        <iframe data-src="https://github.com/obspy/obspy/pull/3002" class="r-stretch"
                            width="90%"></iframe>
                    </section>

                    <section data-visibility="hidden">
                        <h2>Packaging Software -> Accessibility</h2>
                    </section>

                    <section>
                        <h2>DevOps: Automation through CI/CD </h2>
                        <p>GitHub Actions: Quality assurance through continuous integration (CI)</p>
                        <pre class="yaml"><code data-trim data-line-numbers>
name: Lint
on: [push, pull_request]
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - uses: psf/black@stable
                      </code></pre>
                        <div>
                            <p>To publish a Python package, just use:</p>
                            <pre class="fragment yaml"><code data-trim data-line-numbers>
name: Build
on: [push, pull_request]
jobs:
  build_wheels:
  name: Build wheels on ${{ matrix.os }}
  runs-on: ${{ matrix.os }}
  ...
</code></pre>
                        </div>
                        <p class="fragment">Put these files in <span
                                style="font-family: monospace;">.github/workflows/lint.yaml</span></p>
                    </section>

                </section>

                <section>
                    <section>
                        <h2>Open Data</h2>
                    </section>
                    <section>
                        <h2>Finding the right format</h2>
                    </section>
                    <section>
                        <h2>Clear language (Metadata</h2>)
                    </section>
                    <section>
                        <h2>Provide a library</h2>
                    </section>
                    <section>
                        <h2>Definition of APIs</h2>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>Publishing Software and Data</h2>
                        <p>Referencing and citations üéì</p>
                    </section>
                    <section>
                        <h2>Zenodo</h2>
                        <p>Easy DOIs on data and software, not reviewed.</p>
                        <iframe data-src="https://zenodo.org/" class="r-stretch" width="80%"></iframe>
                    </section>
                    <section>
                        <h2>JOSS</h2>
                        <p>The Journal of Open Source Software, peer-reviewed.</p>
                        <iframe data-src="https://joss.theoj.org/" class="r-stretch" width="80%"></iframe>
                        <p>Short papers displaying methods and maturity of your software.</p>
                    </section>
                </section>
                <section>
                    <h2>Thank you üçã</h2>
                </section>
            </div>
        </div>

        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
                hash: true,
                width: 1920,
                height: 1080,
                slideNumber: true,
                // Learn about plugins: https://revealjs.com/plugins/
                plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
            });
        </script>
    </body>

</html>
